{{- $raw := .Raw -}}
{{- $lines := split $raw "\n" -}}
{{- $first := index $lines 0 | trim -}}

{{/* Match [!NOTE], [!TIP], [!WARNING], [!INFO], [!EXAMPLE] */}}
{{- if findRE `^\[!([A-Za-z]+)\]` $first -}}

  {{- $type := replaceRE `^\[!([A-Za-z]+)\].*` "$1" $first | lower -}}
  {{- $remainingLines := slice -}}

  {{/* Drop the first line ([!NOTE]) and keep the rest of the blockquote */}}
  {{- range $i, $line := $lines -}}
    {{- if gt $i 0 -}}
      {{- $remainingLines = $remainingLines | append ($line | trim) -}}
    {{- end -}}
  {{- end -}}

  <div class="admonition {{ $type }}">
    <div class="admonition-title">{{ title $type }}</div>
    <div class="admonition-body">
      {{ delimit $remainingLines "\n" | markdownify }}
    </div>
  </div>

{{ else }}

  <blockquote>
    {{ .Inner }}
  </blockquote>

{{ end }}

