{{ define "main" }}

  {{ if .IsHome }}
    <h1>{{ .Title | default "Welcome" }}</h1>
    {{ with .Content }}<p class="muted">{{ . }}</p>{{ end }}

    <section class="cards">
      {{ $ug := site.GetPage "section" "user-guides" }}
      {{ $ag := site.GetPage "section" "api-guides" }}
      {{ $ht := site.GetPage "section" "how-to-articles" }}
      {{ $rg := site.GetPage "section" "technical-reference-guides" }}

      <a class="card" href="{{ $ug.RelPermalink }}">
        <h2>User Guides</h2>
        <p class="muted">{{ with $ug }}{{ .Params.summary }}{{ end }}</p>
      </a>

      <a class="card" href="{{ $ag.RelPermalink }}">
        <h2>API Guides</h2>
        <p class="muted">{{ with $ag }}{{ .Params.summary }}{{ end }}</p>
      </a>

      <a class="card" href="{{ $ht.RelPermalink }}">
        <h2>How to Articles</h2>
        <p class="muted">{{ with $ht }}{{ .Params.summary }}{{ end }}</p>
      </a>

      <a class="card" href="{{ $rg.RelPermalink }}">
        <h2>Technical Reference Guides</h2>
        <p class="muted">{{ with $rg }}{{ .Params.summary }}{{ end }}</p>
      </a>
    </section>

  {{ else if .IsSection }}

  <div class="section-with-sidebar">
    <aside class="left-nav">
      <h3>{{ .Section | humanize }}</h3>
      <nav class="left-tree">
        <ul>
          {{ $cur := . }}
          {{ range .Pages.ByWeight }}
            <li class="{{ if eq .RelPermalink $cur.RelPermalink }}active{{ end }}">
              <a href="{{ .RelPermalink }}">{{ .LinkTitle | default .Title }}</a>
            </li>
          {{ end }}
        </ul>
      </nav>
    </aside>

    <article class="section-content">
      <h1>{{ .Title }}</h1>
      {{ with .Params.summary }}<p class="section-intro">{{ . }}</p>{{ end }}
      {{/* If later you add Markdown body to _index.md, swap the previous line for: {{ .Content }} */}}

      <div class="cards">
        {{ range .Pages.ByWeight }}
          <a class="card" href="{{ .RelPermalink }}">
            <h2>{{ .LinkTitle | default .Title }}</h2>
            <p class="muted">
              {{ with .Params.summary }}{{ . }}{{ else }}{{ .Summary }}{{ end }}
            </p>
          </a>
        {{ end }}
      </div>
    </article>
  </div>

  {{ else }}
    <article>
      <h1>{{ .Title }}</h1>
      {{ .Content }}
    </article>
  {{ end }}

{{ end }}
